<md-dialog class="cs-edit-dialog" ng-cloak>
    <md-toolbar>
        <div class="md-toolbar-tools">
            <h2 class="md-title">{{ctrl.title | translate}} - {{ctrl.titleType | translate}}</h2>
        </div>
    </md-toolbar>

    <md-dialog-content class="md-dialog-content">

        <form name="editForm" ng-submit="ctrl.save()" class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3 control-label">Name<span class="star-icon">*</span>：</label>
                <div class="col-sm-5">
                    <input type="text" name="name" class="form-control" ng-model="item.name" required>
                    <span style="color:red" ng-show="editForm.name.$dirty && editForm.name.$invalid">
                    <span ng-show="editForm.name.$error.required">Name is required.</span>
                    </span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Url<span class="star-icon">*</span>：</label>
                <div class="col-sm-5">
                    <input my-text="" type="url" name="url" class="form-control" ng-model="item.url" required>
                    <span style="color:red" ng-show="editForm.url.$dirty && editForm.url.$invalid">
                    <span ng-show="editForm.url.$error.required">Url is required.</span>
                    <span ng-show="editForm.url.$error.url">Url is invalid.</span>
                    </span>
                </div>
            </div>
            <div class="url-tokens-row form-group">
                <label class="col-sm-3 control-label"></label>
                <div class="col-sm-5">
                    <i>Available URL tokens:</i>
                    <div class="url-tokens">
                        <div class="url-token" ng-repeat="url in urlItem" ng-click="urlTokenClick(url)">
                            <span class="url-token-icon">+</span>
                            <span class="url-token-caption">{{url}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Country<span class="star-icon">*</span>: </label>
                <div class="col-sm-5">
                    <select class="cs-subform-select" name="country" ng-model="item.country" required>
                        <option value="{{cou.value}}" ng-repeat="cou in countries">{{cou.display}}</option>
                    </select>
                    <span style="color:red" ng-show="editForm.country.$dirty && editForm.country.$invalid">
                    <span ng-show="editForm.country.$error.required">Country is required.</span>
                    </span>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Affiliate network: </label>
                <div class="col-sm-5">
                    <select name="AffiliateNetworkId" class="cs-subform-select" ng-model="affiliateId">
                        <option value=""></option>
                        <option value="{{affiliate.id}}" ng-repeat="affiliate in affiliates track by $index">{{affiliate.name}}</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Postback Url：</label>
                <div class="col-sm-5">
                    <input type="text" name="postbackUrl" class="form-control" ng-model="item.postbackUrl" ng-show="postbackUrl">
                    <input type="text" class="form-control" ng-model="item.postbackUrl" ng-readonly="true">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label">Payout<span class="star-icon">*</span>：</label>
                <div class="col-sm-5">
                    <label class="radio-inline">
                        <input type="radio" name="payoutMode" ng-model="item.payoutMode" value="0" required> Auto
                    </label>
                    <label class="radio-inline">
                        <input type="radio" name="payoutMode" ng-model="item.payoutMode" value="1" required> Manual
                    </label>
                    <span style="color:red" ng-show="editForm.payoutMode.$dirty && editForm.payoutMode.$invalid">
                    <span ng-show="editForm.payoutMode.$error.required">PayoutMode is required.</span>
                    </span>
                </div>
            </div>
            <div class="form-group" ng-show="item.payoutMode == 1">
                <label class="col-sm-3 control-label" ng-modle="radioTitle"></label>
                <div class="col-sm-5">
                    <span class="dollar-icon">$</span>
                    <input type="text" class="form-control dollar-input" ng-model="item.payoutValue" ng-value="$">
                </div>
            </div>
            <div class="form-group tag-items">
                <label class="col-sm-3 control-label">Tags：</label>
                <div class="col-sm-5 selectize-input form-group">
                    <md-chips
                            ng-model="tags"
                            readonly="ctrl.readonly"
                            md-removable="ctrl.removable"
                            placeholder="Enter a tag"
                            delete-button-label="Remove Tag"
                            delete-hint="Press delete to remove tag"
                            secondary-placeholder="+Tag"
                            md-max-chips="10">
                    </md-chips>
                </div>
            </div>
        </form>

    </md-dialog-content>

    <md-dialog-actions>
        <md-button class="md-primary" ng-click="ctrl.save()" ng-disabled="editForm.$invalid">{{'save' | translate}}
        </md-button>
        <md-button class="md-primary" ng-click="ctrl.cancel()">{{'cancel' | translate}}</md-button>
    </md-dialog-actions>

</md-dialog>
